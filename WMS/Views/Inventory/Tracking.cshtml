@* @model WMS.Models.ViewModels.TrackingViewModel *@
@* @{ *@
@*     ViewData["Title"] = "Inventory Tracking"; *@
@* } *@

@* <div class="page-header"> *@
@*     <div class="row align-items-center"> *@
@*         <div class="col"> *@
@*             <h1 class="page-title"> *@
@*                 <i class="fas fa-search me-2"></i> *@
@*                 Inventory Tracking *@
@*             </h1> *@
@*             <p class="page-subtitle">Track inventory movements and history by source reference</p> *@
@*         </div> *@
@*         <div class="col-auto"> *@
@*             <a href="@Url.Action("Index")" class="btn btn-outline-secondary"> *@
@*                 <i class="fas fa-arrow-left"></i> Back to Inventory *@
@*             </a> *@
@*         </div> *@
@*     </div> *@
@* </div> *@

@* <!-- Search Form --> *@
@* <div class="row mb-4"> *@
@*     <div class="col-12"> *@
@*         <div class="card"> *@
@*             <div class="card-header"> *@
@*                 <h5 class="card-title mb-0"> *@
@*                     <i class="fas fa-search me-2"></i> *@
@*                     Search Criteria *@
@*                 </h5> *@
@*             </div> *@
@*             <div class="card-body"> *@
@*                 <form method="get" class="row g-3"> *@
@*                     <div class="col-md-4"> *@
@*                         <label asp-for="SourceReference" class="form-label"></label> *@
@*                         <input asp-for="SourceReference" class="form-control"  *@
@*                                placeholder="e.g., PO-2024-001, ASN-2024-001" /> *@
@*                         <div class="form-text">Enter source reference to track inventory</div> *@
@*                     </div> *@
@*                     <div class="col-md-3"> *@
@*                         <label asp-for="FromDate" class="form-label"></label> *@
@*                         <input asp-for="FromDate" class="form-control" type="date" /> *@
@*                     </div> *@
@*                     <div class="col-md-3"> *@
@*                         <label asp-for="ToDate" class="form-label"></label> *@
@*                         <input asp-for="ToDate" class="form-control" type="date" /> *@
@*                     </div> *@
@*                     <div class="col-md-2"> *@
@*                         <div class="d-flex gap-2 mt-4"> *@
@*                             <button type="submit" class="btn btn-primary"> *@
@*                                 <i class="fas fa-search"></i> Search *@
@*                             </button> *@
@*                             <a href="@Url.Action("Tracking")" class="btn btn-outline-secondary"> *@
@*                                 <i class="fas fa-times"></i> Clear *@
@*                             </a> *@
@*                         </div> *@
@*                     </div> *@
@*                 </form> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* </div> *@

@* <!-- Search Results --> *@
@* @if (!string.IsNullOrEmpty(Model.SourceReference)) *@
@* { *@
@*     <div class="row"> *@
@*         <div class="col-12"> *@
@*             <div class="card"> *@
@*                 <div class="card-header"> *@
@*                     <h5 class="card-title mb-0"> *@
@*                         <i class="fas fa-list me-2"></i> *@
@*                         Tracking Results for "@Model.SourceReference" *@
@*                         @if (Model.TrackingDetails.Any()) *@
@*                         { *@
@*                             <span class="badge bg-primary ms-2">@Model.TrackingDetails.Count() items found</span> *@
@*                         } *@
@*                     </h5> *@
@*                 </div> *@
@*                 <div class="card-body p-0"> *@
@*                     @if (Model.TrackingDetails.Any()) *@
@*                     { *@
@*                         <div class="table-responsive"> *@
@*                             <table class="table table-hover mb-0"> *@
@*                                 <thead class="table-light"> *@
@*                                     <tr> *@
@*                                         <th>Item</th> *@
@*                                         <th>Location</th> *@
@*                                         <th class="text-center">Quantity</th> *@
@*                                         <th class="text-center">Status</th> *@
@*                                         <th class="text-end">Value</th> *@
@*                                         <th class="text-center">Last Updated</th> *@
@*                                         <th class="text-center">Actions</th> *@
@*                                     </tr> *@
@*                                 </thead> *@
@*                                 <tbody> *@
@*                                     @foreach (var item in Model.TrackingDetails) *@
@*                                     { *@
@*                                         <tr> *@
@*                                             <td> *@
@*                                                 <div> *@
@*                                                     <strong>@item.ItemDisplay</strong> *@
@*                                                     @if (!string.IsNullOrEmpty(item.SourceReference)) *@
@*                                                     { *@
@*                                                         <br><small class="text-muted">Ref: @item.SourceReference</small> *@
@*                                                     } *@
@*                                                 </div> *@
@*                                             </td> *@
@*                                             <td> *@
@*                                                 <div> *@
@*                                                     <strong>@item.LocationDisplay</strong> *@
@*                                                     <br><small class="text-muted">@item.ItemUnit</small> *@
@*                                                 </div> *@
@*                                             </td> *@
@*                                             <td class="text-center"> *@
@*                                                 <span class="badge @item.QuantityCssClass fs-6"> *@
@*                                                     @item.Quantity *@
@*                                                 </span> *@
@*                                                 @if (item.NeedsReorder) *@
@*                                                 { *@
@*                                                     <br><small class="text-warning"><i class="fas fa-exclamation-triangle"></i> Low Stock</small> *@
@*                                                 } *@
@*                                             </td> *@
@*                                             <td class="text-center"> *@
@*                                                 <span class="badge @item.StatusCssClass"> *@
@*                                                     @item.StatusIndonesia *@
@*                                                 </span> *@
@*                                             </td> *@
@*                                             <td class="text-end"> *@
@*                                                 <strong>@item.TotalValue.ToString("C")</strong> *@
@*                                                 <br><small class="text-muted">@item.LastCostPrice.ToString("C")/unit</small> *@
@*                                             </td> *@
@*                                             <td class="text-center"> *@
@*                                                 <small>@item.LastUpdated.ToString("dd/MM/yyyy HH:mm")</small> *@
@*                                             </td> *@
@*                                             <td class="text-center"> *@
@*                                                 <div class="btn-group" role="group"> *@
@*                                                     <a href="@Url.Action("Details", new { id = item.Id })"  *@
@*                                                        class="btn btn-outline-primary btn-sm" title="View Details"> *@
@*                                                         <i class="fas fa-eye"></i> *@
@*                                                     </a> *@
@*                                                     <a href="@Url.Action("Edit", new { id = item.Id })"  *@
@*                                                        class="btn btn-outline-warning btn-sm" title="Edit"> *@
@*                                                         <i class="fas fa-edit"></i> *@
@*                                                     </a> *@
@*                                                 </div> *@
@*                                             </td> *@
@*                                         </tr> *@
@*                                     } *@
@*                                 </tbody> *@
@*                             </table> *@
@*                         </div> *@
                        
@*                         <!-- Summary Information --> *@
@*                         <div class="card-footer"> *@
@*                             <div class="row"> *@
@*                                 <div class="col-md-3"> *@
@*                                     <div class="text-center"> *@
@*                                         <h6 class="text-primary">@Model.TrackingDetails.Count()</h6> *@
@*                                         <small class="text-muted">Total Items</small> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-3"> *@
@*                                     <div class="text-center"> *@
@*                                         <h6 class="text-success">@Model.TrackingDetails.Sum(i => i.Quantity)</h6> *@
@*                                         <small class="text-muted">Total Quantity</small> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-3"> *@
@*                                     <div class="text-center"> *@
@*                                         <h6 class="text-info">@Model.TrackingDetails.Sum(i => i.TotalValue).ToString("C")</h6> *@
@*                                         <small class="text-muted">Total Value</small> *@
@*                                     </div> *@
@*                                 </div> *@
@*                                 <div class="col-md-3"> *@
@*                                     <div class="text-center"> *@
@*                                         <h6 class="text-warning">@Model.TrackingDetails.Count(i => i.NeedsReorder)</h6> *@
@*                                         <small class="text-muted">Low Stock Items</small> *@
@*                                     </div> *@
@*                                 </div> *@
@*                             </div> *@
@*                         </div> *@
@*                     } *@
@*                     else *@
@*                     { *@
@*                         <div class="text-center py-5"> *@
@*                             <i class="fas fa-search fa-3x text-muted mb-3"></i> *@
@*                             <h5 class="text-muted">No inventory found</h5> *@
@*                             <p class="text-muted">No inventory items found for source reference "@Model.SourceReference"</p> *@
@*                             <div class="mt-3"> *@
@*                                 <a href="@Url.Action("Tracking")" class="btn btn-primary"> *@
@*                                     <i class="fas fa-search"></i> New Search *@
@*                                 </a> *@
@*                             </div> *@
@*                         </div> *@
@*                     } *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* } *@
@* else *@
@* { *@
@*     <!-- Help and Examples --> *@
@*     <div class="row"> *@
@*         <div class="col-md-8"> *@
@*             <div class="card"> *@
@*                 <div class="card-header"> *@
@*                     <h5 class="card-title mb-0"> *@
@*                         <i class="fas fa-info-circle me-2"></i> *@
@*                         How to Use Inventory Tracking *@
@*                     </h5> *@
@*                 </div> *@
@*                 <div class="card-body"> *@
@*                     <h6>Search by Source Reference</h6> *@
@*                     <p>Enter a source reference to track all inventory items that originated from that source. Common source references include:</p> *@
@*                     <ul> *@
@*                         <li><strong>Purchase Orders:</strong> PO-2024-001, PO-2024-002</li> *@
@*                         <li><strong>Advanced Shipping Notices:</strong> ASN-2024-001, ASN-2024-002</li> *@
@*                         <li><strong>Sales Orders:</strong> SO-2024-001, SO-2024-002</li> *@
@*                         <li><strong>Transfer References:</strong> TR-2024-001, TR-2024-002</li> *@
@*                         <li><strong>Adjustment References:</strong> ADJ-2024-001, ADJ-2024-002</li> *@
@*                     </ul> *@
                    
@*                     <h6 class="mt-4">Date Range Filtering</h6> *@
@*                     <p>Use the date range filters to narrow down your search to specific time periods. This is useful for:</p> *@
@*                     <ul> *@
@*                         <li>Finding inventory from recent shipments</li> *@
@*                         <li>Tracking items received in a specific month</li> *@
@*                         <li>Auditing inventory movements over time</li> *@
@*                     </ul> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
        
@*         <div class="col-md-4"> *@
@*             <div class="card"> *@
@*                 <div class="card-header"> *@
@*                     <h5 class="card-title mb-0"> *@
@*                         <i class="fas fa-lightbulb me-2"></i> *@
@*                         Quick Search Examples *@
@*                     </h5> *@
@*                 </div> *@
@*                 <div class="card-body"> *@
@*                     <h6>Try these searches:</h6> *@
@*                     <div class="d-grid gap-2"> *@
@*                         <button type="button" class="btn btn-outline-primary btn-sm" onclick="searchExample('PO-2024-001')"> *@
@*                             <i class="fas fa-search me-2"></i>PO-2024-001 *@
@*                         </button> *@
@*                         <button type="button" class="btn btn-outline-primary btn-sm" onclick="searchExample('ASN-2024-001')"> *@
@*                             <i class="fas fa-search me-2"></i>ASN-2024-001 *@
@*                         </button> *@
@*                         <button type="button" class="btn btn-outline-primary btn-sm" onclick="searchExample('SO-2024-001')"> *@
@*                             <i class="fas fa-search me-2"></i>SO-2024-001 *@
@*                         </button> *@
@*                         <button type="button" class="btn btn-outline-primary btn-sm" onclick="searchExample('TR-2024-001')"> *@
@*                             <i class="fas fa-search me-2"></i>TR-2024-001 *@
@*                         </button> *@
@*                     </div> *@
@*                 </div> *@
@*             </div> *@
            
@*             <div class="card mt-3"> *@
@*                 <div class="card-header"> *@
@*                     <h5 class="card-title mb-0"> *@
@*                         <i class="fas fa-chart-line me-2"></i> *@
@*                         Tracking Benefits *@
@*                     </h5> *@
@*                 </div> *@
@*                 <div class="card-body"> *@
@*                     <ul class="list-unstyled small"> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Trace inventory origins</li> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Audit trail compliance</li> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Quality control tracking</li> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Recall management</li> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Supplier performance</li> *@
@*                         <li><i class="fas fa-check text-success me-2"></i>Cost analysis</li> *@
@*                     </ul> *@
@*                 </div> *@
@*             </div> *@
@*         </div> *@
@*     </div> *@
@* } *@

@* <script> *@
@*         // Search example function *@
@*         function searchExample(reference) { *@
@*             document.getElementById('SourceReference').value = reference; *@
@*             document.querySelector('form').submit(); *@
@*         } *@
        
@*         // Auto-submit form on Enter key *@
@*         document.getElementById('SourceReference').addEventListener('keypress', function(e) { *@
@*             if (e.key === 'Enter') { *@
@*                 e.preventDefault(); *@
@*                 this.form.submit(); *@
@*             } *@
@*         }); *@
        
@*         // Set default date range (last 30 days) *@
@*         document.addEventListener('DOMContentLoaded', function() { *@
@*             const today = new Date(); *@
@*             const thirtyDaysAgo = new Date(today.getTime() - (30 * 24 * 60 * 60 * 1000)); *@
            
@*             const fromDateInput = document.getElementById('FromDate'); *@
@*             const toDateInput = document.getElementById('ToDate'); *@
            
@*             if (!fromDateInput.value) { *@
@*                 fromDateInput.value = thirtyDaysAgo.toISOString().split('T')[0]; *@
@*             } *@
@*             if (!toDateInput.value) { *@
@*                 toDateInput.value = today.toISOString().split('T')[0]; *@
@*             } *@
@*         }); *@
        
@*         // Clear form function *@
@*         function clearForm() { *@
@*             document.getElementById('SourceReference').value = ''; *@
@*             document.getElementById('FromDate').value = ''; *@
@*             document.getElementById('ToDate').value = ''; *@
@*         } *@ 
@*     </script> *@
