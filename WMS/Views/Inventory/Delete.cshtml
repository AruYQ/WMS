@model WMS.Models.ViewModels.InventoryViewModel
@{
    ViewData["Title"] = "Delete Inventory";
}

<div class="page-header">
    <div class="row align-items-center">
        <div class="col">
            <h1 class="page-title">
                <i class="fas fa-trash me-2"></i>
                Delete Inventory
            </h1>
            <p class="page-subtitle">Confirm deletion of inventory item</p>
        </div>
        <div class="col-auto">
            <a href="@Url.Action("Details", new { id = Model.Id })" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left"></i> Back to Details
            </a>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card border-danger">
            <div class="card-header bg-danger text-white">
                <h5 class="card-title mb-0">
                    <i class="fas fa-exclamation-triangle me-2"></i>
                    Confirm Deletion
                </h5>
            </div>
            <div class="card-body">
                <div class="alert alert-danger" role="alert">
                    <h4 class="alert-heading">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        Warning!
                    </h4>
                    <p>You are about to permanently delete this inventory item. This action cannot be undone.</p>
                    <hr>
                    <p class="mb-0">Please review the information below and confirm that you want to proceed with the deletion.</p>
                </div>
                
                <div class="row">
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Item</label>
                            <p class="form-control-plaintext">@Model.ItemDisplay</p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Location</label>
                            <p class="form-control-plaintext">@Model.LocationDisplay</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="mb-3">
                            <label class="form-label fw-bold">Quantity</label>
                            <p class="form-control-plaintext">
                                <span class="badge @Model.QuantityCssClass fs-6">@Model.Quantity</span>
                            </p>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-bold">Total Value</label>
                            <p class="form-control-plaintext">
                                <strong class="text-success">@Model.TotalValue.ToString("C")</strong>
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label class="form-label fw-bold">Status</label>
                    <p class="form-control-plaintext">
                        <span class="badge @Model.StatusCssClass">@Model.StatusIndonesia</span>
                    </p>
                </div>
                
                <form asp-action="Delete" method="post" class="mt-4">
                    <input asp-for="Id" type="hidden" />
                    
                    <div class="d-flex gap-2">
                        <button type="submit" class="btn btn-danger" id="deleteButton">
                            <i class="fas fa-trash"></i> Yes, Delete Inventory
                        </button>
                        <a href="@Url.Action("Details", new { id = Model.Id })" class="btn btn-outline-secondary">
                            <i class="fas fa-times"></i> Cancel
                        </a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <div class="col-md-4">
        <!-- Impact Analysis -->
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-chart-line me-2"></i>
                    Impact Analysis
                </h5>
            </div>
            <div class="card-body">
                <h6>What will be deleted:</h6>
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-danger me-2"></i>Inventory record</li>
                    <li><i class="fas fa-check text-danger me-2"></i>Stock quantity: @Model.Quantity units</li>
                    <li><i class="fas fa-check text-danger me-2"></i>Value: @Model.TotalValue.ToString("C")</li>
                    <li><i class="fas fa-check text-danger me-2"></i>Location allocation</li>
                </ul>
                
                <h6 class="mt-3">Potential Impact:</h6>
                <ul class="list-unstyled small">
                    <li><i class="fas fa-exclamation-triangle text-warning me-2"></i>Stock levels will decrease</li>
                    <li><i class="fas fa-exclamation-triangle text-warning me-2"></i>Location will become available</li>
                    <li><i class="fas fa-exclamation-triangle text-warning me-2"></i>Inventory reports will be affected</li>
                    <li><i class="fas fa-exclamation-triangle text-warning me-2"></i>Audit trail will be maintained</li>
                </ul>
            </div>
        </div>
        
        <!-- Alternative Actions -->
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-lightbulb me-2"></i>
                    Alternative Actions
                </h5>
            </div>
            <div class="card-body">
                <p class="small text-muted">Consider these alternatives before deleting:</p>
                <div class="d-grid gap-2">
                    <a href="@Url.Action("Edit", new { id = Model.Id })" class="btn btn-outline-warning btn-sm">
                        <i class="fas fa-edit me-2"></i>Edit Instead
                    </a>
                    <a href="@Url.Action("TransferStock", new { inventoryId = Model.Id })" class="btn btn-outline-primary btn-sm">
                        <i class="fas fa-exchange-alt me-2"></i>Transfer Stock
                    </a>
                    <a href="@Url.Action("AdjustStock", new { inventoryId = Model.Id })" class="btn btn-outline-info btn-sm">
                        <i class="fas fa-adjust me-2"></i>Adjust to Zero
                    </a>
                </div>
            </div>
        </div>
        
        <!-- Help -->
        <div class="card mt-3">
            <div class="card-header">
                <h5 class="card-title mb-0">
                    <i class="fas fa-question-circle me-2"></i>
                    When to Delete
                </h5>
            </div>
            <div class="card-body">
                <h6>Delete inventory when:</h6>
                <ul class="list-unstyled small">
                    <li><i class="fas fa-check text-success me-2"></i>Item is permanently removed</li>
                    <li><i class="fas fa-check text-success me-2"></i>Location is decommissioned</li>
                    <li><i class="fas fa-check text-success me-2"></i>Data entry error needs correction</li>
                    <li><i class="fas fa-check text-success me-2"></i>System cleanup is required</li>
                </ul>
                
                <h6 class="mt-3">Don't delete when:</h6>
                <ul class="list-unstyled small">
                    <li><i class="fas fa-times text-danger me-2"></i>Stock is temporarily unavailable</li>
                    <li><i class="fas fa-times text-danger me-2"></i>Item is damaged (use status change)</li>
                    <li><i class="fas fa-times text-danger me-2"></i>Location is temporarily full</li>
                    <li><i class="fas fa-times text-danger me-2"></i>Quantity needs adjustment</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script>
        // Confirmation dialog
        document.getElementById('deleteButton').addEventListener('click', function(e) {
            e.preventDefault();
            
            if (confirm('Are you absolutely sure you want to delete this inventory item?\n\nThis action cannot be undone!')) {
                this.form.submit();
            }
        });
        
        // Double confirmation for high-value items
        @if (Model.TotalValue > 1000)
        {
            <text>
            document.getElementById('deleteButton').addEventListener('click', function(e) {
                e.preventDefault();
                
                if (confirm('This inventory item has a high value (@Model.TotalValue.ToString("C")).\n\nAre you absolutely certain you want to delete it?')) {
                    if (confirm('Final confirmation: This will permanently delete @Model.Quantity units worth @Model.TotalValue.ToString("C").\n\nClick OK to proceed with deletion.')) {
                        this.form.submit();
                    }
                }
            });
            </text>
        }
    </script>
